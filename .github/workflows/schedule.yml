name: TUI Price Checker

on:
  schedule:
    # 1. HLAVNÍ ČÁST DNE (8:00 - 16:45)
    # UTC: 07:00 - 15:45 (běží každých 15 min)
    - cron: '*/15 7-15 * * 1-5'

    # 2. PŘELOMOVÁ HODINA (17:00, 17:15, 17:30)
    # UTC: 16:00, 16:15, 16:30
    # Tady explicitně říkáme minuty, abychom trefili přesně 17:30
    - cron: '0,15,30 16 * * 1-5'

    # 3. VEČER (18:00 - 21:30)
    # UTC: 17:00 - 20:30 (běží každých 30 min)
    - cron: '*/30 17-20 * * 1-5'

    # 4. KONEC (22:00)
    # UTC: 21:00 (poslední zpráva dne)
    - cron: '0 21 * * 1-5'

  workflow_dispatch:

jobs:
  check_price:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run script
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.CHAT_ID }}
        run: python main.py
